<UserControl x:Class="BOZea.Views.Dashboard.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:shared="clr-namespace:BOZea.Views.Shared"
             mc:Ignorable="d"
             FontFamily="Plus Jakarta Sans"
             d:DesignWidth="1930"
             d:DesignHeight="1045.92">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/BOZea;component/Views/Styles/MaterialOverrides.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Background="#F8F9FA">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- NavBar -->
            <RowDefinition Height="*"/>
            <!-- ScrollableContent -->
        </Grid.RowDefinitions>

        <!-- NavBar (Fixed) -->
        <shared:NavBar Grid.Row="0"
                       SearchQuery="{Binding SearchQuery, Mode=TwoWay}"
                       ExecuteSearchCommand="{Binding ExecuteSearchCommand}"
                       NavigateHomeCommand="{Binding NavigateHomeCommand}"
                       NavigateCategoryCommand="{Binding NavigateCategoryCommand}"
                       OpenProfileCommand="{Binding OpenProfileCommand}"
                       CurrentUser="{Binding CurrentUser}"
                       VerticalAlignment="Top"/>

        <!-- Scrollable Content -->
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      PanningMode="VerticalOnly">

            <StackPanel>
                <!-- Hero Section -->
                <Grid Height="400"
                      Margin="0,0,0,20">
                    <Image Source="/Views/Assets/hero-image.png"
                           Stretch="UniformToFill"/>
                    <Rectangle Fill="#000000"
                               Opacity="0.4"/>
                    <StackPanel VerticalAlignment="Center"
                                HorizontalAlignment="Left"
                                Margin="80,0,0,0"
                                MaxWidth="600">
                        <TextBlock Text="All maritime products."
                                   Foreground="White"
                                   FontSize="48"
                                   FontWeight="Bold"
                                   Margin="0,0,0,5"/>
                        <TextBlock Text="One Place."
                                   Foreground="White"
                                   FontSize="48"
                                   FontWeight="Bold"
                                   Margin="0,0,0,20"/>
                        <TextBlock Text="Buy and sell certified boat, engines, and navigation systems."
                                   Foreground="White"
                                   FontSize="18"
                                   TextWrapping="Wrap"
                                   LineHeight="28"/>
                    </StackPanel>
                </Grid>

                <!-- Main Content -->
                <StackPanel Margin="80,40,80,40">
                    <!-- Categories with Products Section -->
                    <ItemsControl ItemsSource="{Binding CategoriesWithProducts}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,0,0,40">
                                    <!-- Category Header -->
                                    <Grid Margin="0,0,0,20"
                                          Height="40">
                                        <TextBlock Text="{Binding CategoryName}"
                                                   FontSize="24"
                                                   FontWeight="Bold"
                                                   VerticalAlignment="Center"/>
                                        <Button Content="See all â€º"
                                                HorizontalAlignment="Right"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Foreground="{StaticResource PrimaryBlueBrush}"
                                                FontSize="16"
                                                Cursor="Hand"
                                                Command="{Binding DataContext.SeeAllCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                CommandParameter="{Binding CategoryName}"
                                                Padding="0"/>
                                    </Grid>

                                    <!-- Products Horizontal List -->
                                    <ItemsControl ItemsSource="{Binding Products}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Margin="0,0,20,0"
                                                        Width="220"
                                                        Background="White"
                                                        CornerRadius="8"
                                                        Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                                                      Command="{Binding DataContext.ProductSelectedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                      CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Effect>
                                                        <DropShadowEffect ShadowDepth="2"
                                                                          Color="#DDD"
                                                                          BlurRadius="10"
                                                                          Opacity="0.3"/>
                                                    </Border.Effect>
                                                    <StackPanel>
                                                        <Border Height="160"
                                                                Background="#F5F5F5"
                                                                CornerRadius="8,8,0,0">
                                                            <Image Source="{Binding ImageUrl}"
                                                                   Stretch="UniformToFill"/>
                                                        </Border>
                                                        <StackPanel Margin="12">
                                                            <TextBlock Text="{Binding ProductName}"
                                                                       FontWeight="SemiBold"
                                                                       FontSize="16"
                                                                       Margin="0,0,0,5"
                                                                       TextTrimming="CharacterEllipsis"/>
                                                            <TextBlock Text="{Binding Category}"
                                                                       Foreground="#999"
                                                                       FontSize="13"
                                                                       Margin="0,0,0,10"/>
                                                            <TextBlock Text="{Binding Price}"
                                                                       FontWeight="Bold"
                                                                       FontSize="18"
                                                                       Foreground="{StaticResource PrimaryBlueBrush}"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>

                <!-- Footer -->
                <shared:Footer NavigateBoatCommand="{Binding NavigateCategoryCommand}"
                               NavigateEnginesCommand="{Binding NavigateCategoryCommand}"
                               NavigateGpsCommand="{Binding NavigateCategoryCommand}"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
